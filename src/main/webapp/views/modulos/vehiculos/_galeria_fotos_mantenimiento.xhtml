<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:p="http://primefaces.org/ui">

   <h:form id="form_galeria_mantenimiento" enctype="multipart/form-data">
      <p:dialog header="Fotos de los mantenimientos" widgetVar="galeriaFotosMantenimientoDialog" styleClass="mb-5"
                minWidth="600"
                showEffect="fade" modal="true"
                cache="false" responsive="true">

         <p:panel rendered="#{empty vehiculoView.mantenimientoFotoList}">
            <p:outputLabel>No se han cargado fotos todav√≠a</p:outputLabel>
            <p:commandLink styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default flex justify-content-center align-items-center"
                           ajax="true" action="#{vehiculoView.abrirModalAdjuntarFotos(vehiculoView.vehiculoSelected.idVehiculo)}"
                           oncomplete="Main.changeChooseLabel();" update="growl">
               <i class="fi fi-rr-add-image"/>
            </p:commandLink>
         </p:panel>

         <p:galleria value="#{vehiculoView.mantenimientoFotoList}" var="mantenimientoFoto" numVisible="5"
                     widgetVar="mantenimientoFotoGaleria"
                     rendered="#{vehiculoView.mantenimientoFotoList.size() > 0}"
                     responsiveOptions="#{vehiculoView.responsiveOptions}"
                     circular="true" autoPlay="true" transitionInterval="5000"
                     showCaption="true" style="max-width: 600px">
            <p:graphicImage value="#{fileBean.getFile(mantenimientoFoto.rutaArchivo)}" alt="#{mantenimientoFoto.nombreArchivo}"
                            style="width: 100%; display: block;" stream="false" />
            <f:facet name="caption">
               <h5 class="mb-2 text-white">#{mantenimientoFoto.nombreArchivo}</h5>
               <p:outputPanel class="flex justify-content-between align-items-center">
                  <p class="text-white">#{mantenimientoFoto.fechaCreacion}</p>
                  <p:commandLink styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default flex justify-content-center align-items-center"
                                 ajax="true" action="#{vehiculoView.borrarFotoMantenimiento(mantenimientoFoto.idMantenimientoFoto)}">
                     <i class="fi fi-rr-trash text-xl text-white"/>
                  </p:commandLink>
               </p:outputPanel>
            </f:facet>
            <f:facet name="thumbnail">
               <p:graphicImage value="#{fileBean.getFile(mantenimientoFoto.rutaArchivo)}" alt="#{mantenimientoFoto.nombreArchivo}"
                               style="height: 100px; width: auto; display: block" stream="false" />
            </f:facet>
         </p:galleria>
      </p:dialog>
   </h:form>

</ui:composition>
