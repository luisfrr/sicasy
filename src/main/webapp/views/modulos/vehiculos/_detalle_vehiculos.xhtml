<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">

   <p:outputPanel id="panel_detalle" rendered="#{vehiculoView.showDetailsPanel}">

      <h:form id="form_breadcrumb_detalle" styleClass="mb-5">
         <p:breadCrumb homeDisplay="text">
            <p:menuitem value="Inicio" ajax="false" action="#{menuSessionBean.goToHome()}"/>
            <p:menuitem value="Vehículos" ajax="true" action="#{vehiculoView.regresar()}"/>
            <p:menuitem value="Detalle"/>
         </p:breadCrumb>
      </h:form>

      <p:tabView id="tab_view_detalles" styleClass="mb-5">
         <p:tab id="tab_detalle_vehiculo" title="Información del vehículo">
            <h:form id="form_editar_vehiculo">
               <p:panel header="Datos del vehículo" widgetVar="panelVehiculo" styleClass="mb-5">
                  <f:facet name="actions">
                     <p:commandLink styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default"
                                    ajax="true" action="#{vehiculoView.permitirEditar()}"
                                    rendered="#{vehiculoView.readOnlyEditForm}">
                        <h:outputText styleClass="ui-icon pi pi-pencil"/>
                     </p:commandLink>
                  </f:facet>
                  <p:outputPanel styleClass="formgrid grid mb-5">
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Dependencia" styleClass="block"/>
                        <p:selectOneMenu value="#{vehiculoView.vehiculoSelected.dependencia.idDependencia}"
                                         styleClass="w-full mw-auto" required="true" disabled="#{vehiculoView.readOnlyEditForm}">
                           <f:selectItem itemLabel="Seleccione uno..." itemValue="#{null}"/>
                           <f:selectItems value="#{vehiculoView.dependenciaList}" var="dependencia"
                                          itemValue="#{dependencia.idDependencia}" itemLabel="#{dependencia.abreviatura} - #{dependencia.nombre}"/>
                        </p:selectOneMenu>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="No. Serie" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.noSerie}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Placa" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.placa}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Marca" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true"
                                     placeholder="Ej. Nissan" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.marca}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Modelo" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true"
                                     placeholder="Ej. Altima" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.modelo}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Año" styleClass="block"/>
                        <p:inputNumber styleClass="block w-full" required="true"
                                       placeholder="Ej. 2022" disabled="#{vehiculoView.readOnlyEditForm}"
                                       value="#{vehiculoView.vehiculoSelected.anio}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="No. Motor" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.noMotor}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Color" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true"
                                     placeholder="Ej. Rojo" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.color}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Condición" styleClass="block"/>
                        <p:selectOneMenu value="#{vehiculoView.vehiculoSelected.condicionVehiculo.idCondicionVehiculo}"
                                         styleClass="w-full mw-auto" required="true" disabled="#{vehiculoView.readOnlyEditForm}">
                           <f:selectItem itemLabel="Seleccione uno..." itemValue="#{null}"/>
                           <f:selectItems value="#{vehiculoView.condicionVehiculoList}" var="condicionVehiculo"
                                          itemValue="#{condicionVehiculo.idCondicionVehiculo}" itemLabel="#{condicionVehiculo.nombre}"/>
                        </p:selectOneMenu>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="No. Factura" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.noFactura}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Valor factura" styleClass="block"/>
                        <p:inputNumber styleClass="block w-full" required="true" disabled="#{vehiculoView.readOnlyEditForm}"
                                       value="#{vehiculoView.vehiculoSelected.montoFactura}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Renta mensual" styleClass="block"/>
                        <p:inputNumber styleClass="block w-full" required="true" disabled="#{vehiculoView.readOnlyEditForm}"
                                       value="#{vehiculoView.vehiculoSelected.rentaMensual}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12">
                        <p:outputLabel for="@next" value="Descripción" styleClass="block"/>
                        <p:inputTextarea styleClass="block w-full" rows="2" autoResize="true"
                                         disabled="#{vehiculoView.readOnlyEditForm}"
                                         value="#{vehiculoView.vehiculoSelected.descripcionVehiculo}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Licitación" styleClass="block"/>
                        <p:selectOneMenu value="#{vehiculoView.vehiculoSelected.licitacion.idLicitacion}"
                                         disabled="#{vehiculoView.readOnlyEditForm}"
                                         styleClass="w-full mw-auto">
                           <f:selectItem itemLabel="Seleccione una..." itemValue="#{null}"/>
                           <f:selectItems value="#{vehiculoView.licitacionFormList}" var="licitacion"
                                          itemValue="#{licitacion.idLicitacion}" itemLabel="#{licitacion.numeroLicitacion}"/>
                           <p:ajax event="change" listener="#{vehiculoView.onChangeLicitacionForm()}" update="tab_view_detalles:form_editar_vehiculo"/>
                        </p:selectOneMenu>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Anexo" styleClass="block"/>
                        <p:selectOneMenu value="#{vehiculoView.vehiculoSelected.anexo.idAnexo}"
                                         disabled="#{vehiculoView.readOnlyEditForm}"
                                         styleClass="w-full mw-auto">
                           <f:selectItem itemLabel="Seleccione una..." itemValue="#{null}"/>
                           <f:selectItems value="#{vehiculoView.anexoFormList}" var="anexo"
                                          itemValue="#{anexo.idAnexo}" itemLabel="#{anexo.nombre}"/>
                        </p:selectOneMenu>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Dependencia asignada" styleClass="block"/>
                        <p:selectOneMenu value="#{vehiculoView.vehiculoSelected.dependenciaAsignada.idDependencia}"
                                         disabled="#{vehiculoView.readOnlyEditForm}"
                                         styleClass="w-full mw-auto">
                           <f:selectItem itemLabel="Seleccione una..." itemValue="#{null}"/>
                           <f:selectItems value="#{vehiculoView.dependenciaList}" var="dependencia"
                                          itemValue="#{dependencia.idDependencia}" itemLabel="#{dependencia.abreviatura} - #{dependencia.nombre}"/>
                        </p:selectOneMenu>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Resguardante" styleClass="block"/>
                        <p:inputText styleClass="block w-full" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.resguardante}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Área resguardante" styleClass="block"/>
                        <p:inputText styleClass="block w-full" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.areaResguardante}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Proveedor" styleClass="block"/>
                        <p:inputText styleClass="block w-full" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.proveedor}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Director Administrativo" styleClass="block"/>
                        <p:inputText styleClass="block w-full" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.autorizaDirectorAdmin}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Director General" styleClass="block"/>
                        <p:inputText styleClass="block w-full" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.autorizaDirectorGeneral}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                  </p:outputPanel>
                  <p:outputPanel styleClass="w-full" rendered="#{not vehiculoView.readOnlyEditForm}">
                     <p:outputPanel styleClass="flex justify-content-end">
                        <p:commandButton value="Cancelar" ajax="true" process="@this"
                                         action="#{vehiculoView.cancelarEdicion()}"
                                         styleClass="ui-button-outlined mr-4"/>
                        <p:commandButton value="Guardar" ajax="true" process="@form"
                                         action="#{vehiculoView.guardarEdicion()}"
                                         update="growl @form form_datatable"
                                         validateClient="true"/>
                     </p:outputPanel>
                  </p:outputPanel>
               </p:panel>
            </h:form>
            <p:outputPanel styleClass="grid">
               <p:outputPanel styleClass="col-12 md:col-6 mb-5">
                  <h:form id="form_galeria">
                     <p:panel header="Fotos" widgetVar="panelFotosVehiculo" styleClass="mb-5">
                        <f:facet name="actions">
                           <p:commandLink styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default flex justify-content-center align-items-center"
                                          ajax="true" action="#{vehiculoView.abrirModalAdjuntarFotos(vehiculoView.vehiculoSelected.idVehiculo)}"
                                          oncomplete="Main.changeChooseLabel();" update="growl">
                              <i class="fi fi-rr-add-image"/>
                           </p:commandLink>
                        </f:facet>
                        <p:galleria value="#{vehiculoView.vehiculoFotoList}" var="vehiculoFoto" numVisible="5"
                                    widgetVar="vehiculoFotoGaleria"
                                    rendered="#{vehiculoView.vehiculoFotoList.size() > 0}"
                                    responsiveOptions="#{vehiculoView.responsiveOptions}"
                                    circular="true" autoPlay="true" transitionInterval="5000"
                                    showCaption="true" style="max-width: 800px">
                           <p:graphicImage value="#{fileBean.getFile(vehiculoFoto.rutaArchivo)}" alt="#{vehiculoFoto.nombreArchivo}"
                                           style="width: 100%; display: block;" stream="false" />
                           <f:facet name="caption">
                              <h5 class="mb-2 text-white">#{vehiculoFoto.nombreArchivo}</h5>
                              <p:outputPanel class="flex justify-content-between align-items-center">
                                 <p class="text-white">#{vehiculoFoto.fechaCreacion}</p>
                                 <p:commandLink styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default flex justify-content-center align-items-center"
                                                ajax="true" action="#{vehiculoView.borrarFoto(vehiculoFoto.idVehiculoFoto)}">
                                    <i class="fi fi-rr-trash text-xl text-white"/>
                                 </p:commandLink>
                              </p:outputPanel>
                           </f:facet>
                           <f:facet name="thumbnail">
                              <p:graphicImage value="#{fileBean.getFile(vehiculoFoto.rutaArchivo)}" alt="#{vehiculoFoto.nombreArchivo}"
                                              style="height: 100px; width: auto; display: block" stream="false" />
                           </f:facet>
                        </p:galleria>
                        <p:outputPanel styleClass="grid" rendered="#{vehiculoView.vehiculoFotoList == null or vehiculoView.vehiculoFotoList.size() == 0}">
                           <p:outputPanel styleClass="field col-12">
                              No se han registrado fotos del vehículo
                           </p:outputPanel>
                        </p:outputPanel>
                     </p:panel>
                  </h:form>
               </p:outputPanel>
               <p:outputPanel styleClass="col-12 md:col-6 mb-5">
                  <h:form id="form_polizas">
                     <p:panel header="Póliza vigente" widgetVar="panelPolizaVigente" styleClass="mb-5">
                        <p:outputPanel styleClass="grid" rendered="#{vehiculoView.vehiculoSelected.incisoVigente != null}">
                           <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                              <p:outputLabel for="@next" value="Aseguradora" styleClass="block"/>
                              <p:inputText styleClass="block w-full" readonly="true"
                                           value="#{vehiculoView.vehiculoSelected.incisoVigente.poliza.aseguradora.nombre}"/>
                              <span class="text-sm hidden"> </span>
                           </p:outputPanel>
                           <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                              <p:outputLabel for="@next" value="Póliza" styleClass="block"/>
                              <p:inputText styleClass="block w-full" readonly="true"
                                           value="#{vehiculoView.vehiculoSelected.incisoVigente.poliza.numeroPoliza}"/>
                              <span class="text-sm hidden"> </span>
                           </p:outputPanel>
                           <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                              <p:outputLabel for="@next" value="Inciso" styleClass="block"/>
                              <p:inputText styleClass="block w-full" readonly="true"
                                           value="#{vehiculoView.vehiculoSelected.incisoVigente.inciso}"/>
                              <span class="text-sm hidden"> </span>
                           </p:outputPanel>
                           <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                              <p:outputLabel for="@next" value="Fecha inicio" styleClass="block"/>
                              <p:inputText styleClass="block w-full" readonly="true"
                                           value="#{vehiculoView.vehiculoSelected.incisoVigente.fechaInicioVigencia}">
                                 <f:convertDateTime pattern="dd/MM/yyyy"/>
                              </p:inputText>
                              <span class="text-sm hidden"> </span>
                           </p:outputPanel>
                           <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                              <p:outputLabel for="@next" value="Fecha fin" styleClass="block"/>
                              <p:inputText styleClass="block w-full" readonly="true"
                                           value="#{vehiculoView.vehiculoSelected.incisoVigente.fechaFinVigencia}">
                                 <f:convertDateTime pattern="dd/MM/yyyy"/>
                              </p:inputText>
                              <span class="text-sm hidden"> </span>
                           </p:outputPanel>
                           <p:outputPanel styleClass="field col-12">
                              <p:commandLink value="Descargar póliza" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" rendered="#{vehiculoView.vehiculoSelected.incisoVigente.poliza.rutaArchivo != null}">
                                 <p:fileDownload value="#{fileDownloadBean.downloadFileByPath(vehiculoView.vehiculoSelected.incisoVigente.poliza.rutaArchivo)}"/>
                              </p:commandLink>
                           </p:outputPanel>
                        </p:outputPanel>
                        <p:outputPanel styleClass="grid" rendered="#{vehiculoView.vehiculoSelected.incisoVigente == null}">
                           <p:outputPanel styleClass="field col-12">
                              No cuenta con una póliza vigente
                           </p:outputPanel>
                        </p:outputPanel>
                     </p:panel>
                  </h:form>
               </p:outputPanel>
            </p:outputPanel>
         </p:tab>
         <p:tab id="tab_bitacora" title="Bitácora">
            <h:form id="form_bitacoras">
               <p:panel header="Datos del vehículo" widgetVar="panelVehiculo" styleClass="mb-5">
                  <p:outputPanel styleClass="formgrid grid mb-5">

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="No. Serie" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.noSerie}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-2">
                        <p:outputLabel for="@next" value="Placa" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.placa}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-2">
                        <p:outputLabel for="@next" value="Marca" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true"
                                     placeholder="Ej. Nissan" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.marca}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Modelo" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true"
                                     placeholder="Ej. Altima" disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.modelo}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-2">
                        <p:outputLabel for="@next" value="Año" styleClass="block"/>
                        <p:inputNumber styleClass="block w-full" required="true"
                                       placeholder="Ej. 2022" disabled="#{vehiculoView.readOnlyEditForm}"
                                       value="#{vehiculoView.vehiculoSelected.anio}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <!-- separador de 5 elementos por fila -->

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Dependencia" styleClass="block"/>
                        <p:selectOneMenu value="#{vehiculoView.vehiculoSelected.dependencia.idDependencia}"
                                         styleClass="w-full mw-auto" required="true" disabled="#{vehiculoView.readOnlyEditForm}">
                           <f:selectItem itemLabel="Seleccione uno..." itemValue="#{null}"/>
                           <f:selectItems value="#{vehiculoView.dependenciaList}" var="dependencia"
                                          itemValue="#{dependencia.idDependencia}" itemLabel="#{dependencia.abreviatura} - #{dependencia.nombre}"/>
                        </p:selectOneMenu>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-2">
                        <p:outputLabel for="@next" value="Condición" styleClass="block"/>
                        <p:selectOneMenu value="#{vehiculoView.vehiculoSelected.condicionVehiculo.idCondicionVehiculo}"
                                         styleClass="w-full mw-auto" required="true" disabled="#{vehiculoView.readOnlyEditForm}">
                           <f:selectItem itemLabel="Seleccione uno..." itemValue="#{null}"/>
                           <f:selectItems value="#{vehiculoView.condicionVehiculoList}" var="condicionVehiculo"
                                          itemValue="#{condicionVehiculo.idCondicionVehiculo}" itemLabel="#{condicionVehiculo.nombre}"/>
                        </p:selectOneMenu>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-2">
                        <p:outputLabel for="@next" value="Licitación" styleClass="block"/>
                        <p:selectOneMenu value="#{vehiculoView.vehiculoSelected.licitacion.idLicitacion}"
                                         disabled="#{vehiculoView.readOnlyEditForm}"
                                         styleClass="w-full mw-auto">
                           <f:selectItem itemLabel="Seleccione una..." itemValue="#{null}"/>
                           <f:selectItems value="#{vehiculoView.licitacionFormList}" var="licitacion"
                                          itemValue="#{licitacion.idLicitacion}" itemLabel="#{licitacion.numeroLicitacion}"/>
                           <p:ajax event="change" listener="#{vehiculoView.onChangeLicitacionForm()}" update="tab_view_detalles:form_bitacoras"/>
                        </p:selectOneMenu>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-3">
                        <p:outputLabel for="@next" value="Estatus" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true"
                                     disabled="#{vehiculoView.readOnlyEditForm}"
                                     value="#{vehiculoView.vehiculoSelected.estatusVehiculo.descripcion}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4 xl:col-2">
                        <p:outputLabel for="@next" value="Anexo" styleClass="block"/>
                        <p:selectOneMenu value="#{vehiculoView.vehiculoSelected.anexo.idAnexo}"
                                         disabled="#{vehiculoView.readOnlyEditForm}"
                                         styleClass="w-full mw-auto">
                           <f:selectItem itemLabel="Seleccione una..." itemValue="#{null}"/>
                           <f:selectItems value="#{vehiculoView.anexoFormList}" var="anexo"
                                          itemValue="#{anexo.idAnexo}" itemLabel="#{anexo.nombre}"/>
                        </p:selectOneMenu>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                  </p:outputPanel>

                  <!--panel de registros de mantenimiento -->

                  <p:dataTable var="mantenimiento" value="#{vehiculoView.mantenimientoVehiculoList}"
                               rows="50" rowHover="true" id="dt_mantenimiento"
                               rowKey="#{mantenimiento.idMantenimiento}" rowIndexVar="index"
                               styleClass="dt-scrollable-x"
                               scrollable="true"
                               paginator="true" paginatorPosition="bottom"
                               paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                               currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} registros"
                               rowsPerPageTemplate="50,100,200,{ShowAll|'Todos'}">

                     <f:facet name="header">
                        Registros de mantenimiento
                     </f:facet>

                     <p:column headerText="No." width="40">
                        <h:outputText value="#{index + 1}" />
                     </p:column>

                     <p:column headerText="Fecha solicitud" width="150">
                        <h:outputText value="#{mantenimiento.fechaCreacion}"/>
                     </p:column>

                     <p:column headerText="Tipo mantenimiento" width="150">
                        <h:outputText value="#{mantenimiento.tipoMantenimiento.nombre}"/>
                     </p:column>

                     <p:column headerText="Descripción" width="150">
                        <h:outputText value="#{mantenimiento.descripcion}"/>
                     </p:column>

                     <p:column headerText="Fecha inicio" width="150">
                        <h:outputText value="#{mantenimiento.fechaInicio}"/>
                     </p:column>

                     <p:column headerText="Fecha fin" width="150">
                        <h:outputText value="#{mantenimiento.fechaFin}"/>
                     </p:column>

                     <p:column headerText="Acciones" width="120">

                        <p:commandButton id="buttonOptions" type="button"
                                         icon="fi fi-rr-menu-dots-vertical"
                                         styleClass="rounded-button ui-button-outlined"
                                         />
                        <p:menu overlay="true" trigger="buttonOptions" my="left top" at="left bottom" styleClass="w-16rem">

                              <p:menuitem value="Eliminar mantenimiento" icon="fi fi-rr-trash"
                                          update="form_confirm_dialog" action="#{vehiculoView.doEliminarMatenimiento(mantenimiento)}"
                                          oncomplete="PF('confirmDialog').show()"
                                          ajax="true"/>

                              <p:menuitem value="Editar mantenimiento" icon="fi fi-rr-pencil"
                                          update="growl tab_view_detalles:form_bitacoras:dt_mantenimiento"
                                          action="#{vehiculoView.abrirModalEditarMantenimiento(mantenimiento)}">
                              </p:menuitem>

                              <p:menuitem value="Adjuntar/ver fotos" icon="fi fi-rr-add-image"
                                          action="#{vehiculoView.abrirModalAdjuntaVerFotosMantenimiento(mantenimiento)}"
                                          update="growl dt_mantenimiento">
                              </p:menuitem>

                        </p:menu>

                     </p:column>

                  </p:dataTable>

                  <!--bitacora de actividades -->
                  <p:dataTable id="dt_bitacora_vehiculo"
                               var="bitacora" value="#{vehiculoView.bitacoraVehiculoList}"
                               rows="50" rowHover="true"
                               rowKey="#{bitacora.idBitacoraVehiculo}" rowIndexVar="index"
                               styleClass="dt-scrollable-x"
                               scrollable="true"
                               paginator="true" paginatorPosition="bottom"
                               paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                               currentPageReportTemplate="{startRecord}-{endRecord} de {totalRecords} registros"
                               rowsPerPageTemplate="50,100,200,{ShowAll|'Todos'}">

                     <f:facet name="header">
                        Bitácora de actividades
                     </f:facet>

                     <p:column headerText="No." width="50" >
                        <p:rowToggler />
                        <h:outputText value="#{index + 1}" styleClass="ml-2"/>
                     </p:column>

                     <p:column headerText="Actividad" width="250">
                        <h:outputText value="#{bitacora.accion}"/>
                     </p:column>

                     <p:column headerText="Fecha" width="80">
                        <h:outputText value="#{bitacora.fechaModificacion}"/>
                     </p:column>

                     <p:column headerText="Realizado por" width="100">
                        <h:outputText value="#{bitacora.modificadoPor}"/>
                     </p:column>

                     <!--<p:rowExpansion>
                        <p:dataTable id="dtcambios"
                                     var="cambios" value="#{bitacora.cambioSet}"
                                     rowKey="#{cambios.campo}"
                                     rowHover="true" rowIndexVar="num"
                                     styleClass="dt-scrollable"
                                     scrollable="true">

                           <p:column headerText="No." width="30">
                              <h:outputText value="#{num + 1}" />
                           </p:column>

                           <p:column headerText="Campo" width="80">
                              <h:outputText value="#{cambios.campo}"/>
                           </p:column>

                           <p:column headerText="Anterior" width="120">
                              <h:outputText value="#{cambios.valorAnterior}"/>
                           </p:column>

                           <p:column headerText="Nuevo" width="120">
                              <h:outputText value="#{cambios.valorNuevo}"/>
                           </p:column>

                        </p:dataTable>

                     </p:rowExpansion>-->

                  </p:dataTable>


               </p:panel>
            </h:form>

         </p:tab>
      </p:tabView>

      <h:form id="form_confirm_dialog">
         <p:dialog header="Aviso" widgetVar="confirmDialog"
                   showEffect="fade" modal="true"
                   closable="true" closeOnEscape="true"
                   cache="false" responsive="true">
            <p:outputPanel>
               <p:outputLabel styleClass="block mb-2" value="¿Está seguro que desea eliminar el registro?"/>

            </p:outputPanel>

            <f:facet name="footer">
               <p:commandButton value="No" onclick="PF('confirmDialog').hide()"
                                class="ui-button-outlined"/>
               <p:commandButton value="Si"
                                action="#{vehiculoView.eliminarMantenimiento()}"
                                ajax="true"
                                update="growl :tab_view_detalles:form_bitacoras:dt_mantenimiento"
                                validateClient="true"/>
            </f:facet>
         </p:dialog>
      </h:form>

   </p:outputPanel>



</ui:composition>
