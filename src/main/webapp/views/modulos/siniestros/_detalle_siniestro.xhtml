<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:p="http://primefaces.org/ui">

   <p:outputPanel id="panel_detalle" rendered="#{siniestrosView.showDetalleSiniestroPanel}">

      <h:form id="form_breadcrumb_detalle" styleClass="mb-5">
         <p:breadCrumb homeDisplay="text">
            <p:menuitem value="Inicio" ajax="false" action="#{menuSessionBean.goToHome()}"/>
            <p:menuitem value="Siniestros" ajax="true" action="#{siniestrosView.regresar()}"/>
            <p:menuitem value="Detalle"/>
         </p:breadCrumb>
      </h:form>

      <p:tabView id="tab_view_detalles" styleClass="mb-5">
         <p:tab id="tab_detalle_siniestro" title="Información del siniestro">
            <h:form id="siniestro_vehiculo_form">
               <p:panel header="Datos del vehículo" styleClass="mb-5">
                  <p:outputPanel styleClass="formgrid grid">
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="No. Serie" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.vehiculo.noSerie}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="Marca" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.vehiculo.marca}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="Modelo" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.vehiculo.modelo}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="Año" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.vehiculo.anio}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="Placa" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.vehiculo.placa}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="Color" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.vehiculo.color}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="No. Motor" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.vehiculo.noMotor}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="Condición actual" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.vehiculo.condicionVehiculo.nombre}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-6">
                        <p:outputLabel for="@next" value="Dependencia" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.vehiculo.dependencia.nombre}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                  </p:outputPanel>
               </p:panel>
            </h:form>
            <h:form id="iniestro_inciso_form">
               <p:panel header="Datos de la póliza" styleClass="mb-5">
                  <p:outputPanel styleClass="formgrid grid">
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="Aseguradora" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.inciso.poliza.aseguradora.nombre}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="No. póliza" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.inciso.poliza.numeroPoliza}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="Cobertura" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.inciso.poliza.tipoCobertura}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="Inciso" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.inciso.inciso}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="Fecha inicio vigencia" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.inciso.fechaInicioVigencia}">
                           <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </p:inputText>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-3">
                        <p:outputLabel for="@next" value="Fecha fin vigencia" styleClass="block"/>
                        <p:inputText styleClass="block w-full" readonly="true"
                                     value="#{siniestrosView.siniestroSelected.inciso.fechaFinVigencia}">
                           <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </p:inputText>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                  </p:outputPanel>
               </p:panel>
            </h:form>
            <h:form id="edit_siniestro_form">
               <p:panel header="Datos del siniestro" styleClass="mb-5">
                  <f:facet name="actions">
                     <p:commandLink styleClass="ui-panel-titlebar-icon ui-corner-all ui-state-default"
                                    ajax="true" action="#{siniestrosView.permitirEditar()}"
                                    rendered="#{siniestrosView.readOnlyEditForm}" title="Editar">
                        <h:outputText styleClass="ui-icon pi pi-pencil"/>
                     </p:commandLink>
                  </f:facet>
                  <p:outputPanel styleClass="formgrid grid">
                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" value="No. Siniestro" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true" disabled="#{siniestrosView.readOnlyEditForm}"
                                     value="#{siniestrosView.siniestroSelected.noSiniestroAseguradora}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" value="No. Siniestro SAF" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true" disabled="#{siniestrosView.readOnlyEditForm}"
                                     value="#{siniestrosView.siniestroSelected.noSiniestroSAF}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" value="Ajustador" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true" disabled="#{siniestrosView.readOnlyEditForm}"
                                     value="#{siniestrosView.siniestroSelected.ajustadorAseguradora}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" value="Ajustador SAF" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true" disabled="#{siniestrosView.readOnlyEditForm}"
                                     value="#{siniestrosView.siniestroSelected.ajustadorSAF}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-4 lg:col-4">
                        <p:outputLabel for="@next" value="Responsable" styleClass="block"/>
                        <p:selectOneMenu value="#{siniestrosView.siniestroSelected.responsable}"
                                         disabled="#{siniestrosView.readOnlyEditForm}"
                                         styleClass="w-full mw-auto" required="true">
                           <f:selectItem itemLabel="Seleccione uno..." itemValue="#{null}"/>
                           <f:selectItem itemLabel="#{siniestrosView.SINIESTRO_RESPONSABLE_ASEGURADO}" itemValue="#{siniestrosView.SINIESTRO_RESPONSABLE_ASEGURADO}"/>
                           <f:selectItem itemLabel="#{siniestrosView.SINIESTRO_RESPONSABLE_TERCEROS}" itemValue="#{siniestrosView.SINIESTRO_RESPONSABLE_TERCEROS}"/>
                           <p:ajax event="blur"/>
                        </p:selectOneMenu>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" styleClass="block" value="Fecha siniestro"/>
                        <p:datePicker value="#{siniestrosView.siniestroSelected.fechaSiniestro}"
                                      disabled="#{siniestrosView.readOnlyEditForm}"
                                      placeholder="dd/MM/yyyy HH:mm a" pattern="dd/MM/yyyy HH:mm a"
                                      monthNavigator="true" yearNavigator="true"
                                      showTime="true" hourFormat="12"
                                      showWeek="true" locale="es" required="true"
                                      styleClass="w-full"/>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" styleClass="block" value="Fecha reporte"/>
                        <p:datePicker value="#{siniestrosView.siniestroSelected.fechaReporte}"
                                      disabled="#{siniestrosView.readOnlyEditForm}"
                                      placeholder="dd/MM/yyyy HH:mm a" pattern="dd/MM/yyyy HH:mm a"
                                      monthNavigator="true" yearNavigator="true"
                                      showTime="true" hourFormat="12"
                                      showWeek="true" locale="es" required="true"
                                      styleClass="w-full"/>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" value="Reporta" styleClass="block"/>
                        <p:inputText styleClass="block w-full"
                                     disabled="#{siniestrosView.readOnlyEditForm}"
                                     value="#{siniestrosView.siniestroSelected.reporta}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-8">
                        <p:outputLabel for="@next" value="Causa" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true" maxlength="120"
                                     value="#{siniestrosView.siniestroSelected.causa}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <div class="flex align-items-end h-full">
                           <p:selectBooleanCheckbox value="#{siniestrosView.siniestroSelected.checkPerdidaTotal}"
                                                    disabled="#{siniestrosView.readOnlyEditForm}"
                                                    itemLabel="¿Perdida total?"/>
                           <span class="text-sm hidden"> </span>
                        </div>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12">
                        <p:outputLabel for="@next" value="Declaración siniestro" styleClass="block"/>
                        <p:inputTextarea styleClass="block w-full" rows="5" required="true"
                                         disabled="#{siniestrosView.readOnlyEditForm}"
                                         value="#{siniestrosView.siniestroSelected.declaracionSiniestro}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" value="Estado" styleClass="block"/>
                        <p:inputText styleClass="block w-full" disabled="#{siniestrosView.readOnlyEditForm}"
                                     value="#{siniestrosView.siniestroSelected.estado}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" value="Municipio" styleClass="block"/>
                        <p:inputText styleClass="block w-full" disabled="#{siniestrosView.readOnlyEditForm}"
                                     value="#{siniestrosView.siniestroSelected.municipio}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" value="Localidad" styleClass="block"/>
                        <p:inputText styleClass="block w-full" disabled="#{siniestrosView.readOnlyEditForm}"
                                     value="#{siniestrosView.siniestroSelected.localidad}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" value="Conductor" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true" disabled="#{siniestrosView.readOnlyEditForm}"
                                     value="#{siniestrosView.siniestroSelected.conductor}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" value="No. Licencia" styleClass="block"/>
                        <p:inputText styleClass="block w-full" required="true" disabled="#{siniestrosView.readOnlyEditForm}"
                                     value="#{siniestrosView.siniestroSelected.noLicencia}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" value="Tipo de licencia" styleClass="block"/>
                        <p:inputText styleClass="block w-full" disabled="#{siniestrosView.readOnlyEditForm}"
                                     value="#{siniestrosView.siniestroSelected.tipoLicencia}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" styleClass="block" value="Vencimiento licencia"/>
                        <p:datePicker value="#{siniestrosView.siniestroSelected.vencimientoLicencia}"
                                      disabled="#{siniestrosView.readOnlyEditForm}"
                                      placeholder="dd/MM/yyyy" pattern="dd/MM/yyyy"
                                      monthNavigator="true" yearNavigator="true"
                                      showWeek="true" locale="es" required="true"
                                      styleClass="w-full"/>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 lg:col-8">
                        <div class="flex align-items-end h-full flex-row gap-3">
                           <p:selectBooleanCheckbox value="#{siniestrosView.siniestroSelected.checkDanioViaPublica}"
                                                    disabled="#{siniestrosView.readOnlyEditForm}"
                                                    itemLabel="Daño vía pública"/>
                           <p:selectBooleanCheckbox value="#{siniestrosView.siniestroSelected.checkCorralon}"
                                                    disabled="#{siniestrosView.readOnlyEditForm}"
                                                    itemLabel="Corralón"/>
                           <p:selectBooleanCheckbox value="#{siniestrosView.siniestroSelected.checkMulta}"
                                                    disabled="#{siniestrosView.readOnlyEditForm}"
                                                    itemLabel="Multa">
                              <p:ajax update="registro-siniestro-form:costo_multa" listener="#{siniestrosView.vaciarMulta()}"/>
                           </p:selectBooleanCheckbox>
                        </div>
                     </p:outputPanel>

                     <p:outputPanel styleClass="field col-12 md:col-6 lg:col-4">
                        <p:outputLabel for="@next" value="Costo multa" styleClass="block"/>
                        <p:inputNumber id="costo_multa" styleClass="block w-full"
                                       disabled="#{siniestrosView.readOnlyEditForm or (not siniestrosView.siniestroSelected.checkMulta)}"
                                       value="#{siniestrosView.siniestroSelected.costoMulta}"/>
                        <span class="text-sm hidden"> </span>
                     </p:outputPanel>
                     <p:outputPanel styleClass="w-full" rendered="#{not siniestrosView.readOnlyEditForm}">
                        <p:outputPanel styleClass="flex justify-content-end">
                           <p:commandButton value="Cancelar" ajax="true" process="@this"
                                            action="#{siniestrosView.cancelarEdicion()}"
                                            styleClass="ui-button-outlined mr-4"/>
                           <p:commandButton value="Guardar" ajax="true" process="@form"
                                            action="#{siniestrosView.guardarEdicion()}"
                                            update="growl @form form_datatable"
                                            validateClient="true"/>
                        </p:outputPanel>
                     </p:outputPanel>
                  </p:outputPanel>
               </p:panel>
            </h:form>
         </p:tab>
         <p:tab id="tab_bitacora" title="Bitácora">

         </p:tab>
      </p:tabView>
   </p:outputPanel>
</ui:composition>
